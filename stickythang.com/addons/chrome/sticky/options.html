<!DOCTYPE HTML>
<!-- /*
Copyright (c) 2011, P Clancey. All rights reserved.
Code licensed under the BSD License:
http://www.opensource.org/licenses/bsd-license.php
version: alpha 0.1
*/ -->
<html>
<head>
<title>Contact us - StickyThang!</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<base href="http://stickythang.com/"></base>
<link rel="stylesheet" href="http://stickythang.com/assets/templates/drupify/style.css" type="text/css" />

<script src="http://yui.yahooapis.com/3.4.1/build/yui/yui-min.js"></script>

 <style type="text/css">
 	div.content p {
 		margin:0;
		padding:0 0 8px 0;
 	}
 	div.content p.intro {
		margin-bottom:20px;
		padding:10px 0 20px 0;
 		width:80%;
 	}
 	fieldset {
 		border:0 none;
		margin-bottom:20px;
		padding:10px 0 20px 0;
		width:80%;
 	}
	textarea {
		height:100px;
		width:95%;
	}
	label {
		display:block;
		padding: 6px 0 6px 0;
		width:75%;
	}
	legend {
		font-size:120%;
		margin:0;
		padding:0;
	}
	table.data {
		border-collapse:collapse;
		margin-bottom:12px;
	}
	table.data th {
		text-align:center;
		padding:0 ;
	}
	table.data td {
		vertical-align:top;
		padding:2px 9px 0 9px ;
	}
	table.data div.circle-edit {
		border:1px solid #cecece;
		height:80px;
		padding:0 10px;
		text-align:center;
		width:120px;
	}

	select[multiple='multiple'] {
		height:80px;
		width:120px;
	}
	*[disabled='true'] {
		background-color:#efefef;
		border:1px solid #ccc;
	}
	*.tac {
		text-align:center;
	}
	*.tar {
		text-align:right;
	}
	
	
	
	

ul.menu {
	margin:0 12px 0 6px;
	padding:0;
}	
ul.menu li {
	background-color:#dfdfdf;
	border-radius: 6px 6px 0 0;
	display:inline-block;
	list-style:none;
	padding:3px 10px;
	position:relative;
	top:1px;
}
ul.menu a {
	color:#06c;
	cursor:pointer;
}
ul.menu li.active {
	background-color:#EEF6FF;
	border:1px solid #cecece;
	border-bottom:0 none;
}
ul.menu li.active a {
	color:black;
}

div.unit {
	background-color:#EEF6FF;
	border-radius:5px;
	border:1px solid #cecece;
	margin:0;
	min-height:100px;
	padding:12px 12px 6px 12px;
}
div.unit.off {
	display:none;
}
div.circles {
	background-color:#fff;
	border:1px solid #cecece;
	border-radius:5px;
	padding:0 10px 1px 10px;
	margin-bottom:10px;
}
#divFeedbackThanks {
	display:none;
}


#ulBuddiesList {
	list-style:none;
	margin:0 0 14px 0;
	max-height:200px;
	overflow-y:scroll;
	padding:0;
}
#ulBuddiesList li {
	background-color:#eee;
	border-left:1px solid #ccc;
	border-right:1px solid #ccc;
	display:block;
	padding:3px 14px;
}
#ulBuddiesList li:nth-child(odd){
	background-color:#ccc;
}
#ulBuddiesList li:first-child{
	border-radius:5px 0 0 0;
}
#ulBuddiesList li:last-child{
	border-radius:0 0 0 5px;
	border-bottom:1px solid #ccc;
}
 </style>
  </head>
  <body id="page_bg">
    <div id="wrapper">
      <div id="header">
        <div class="rk-1">
          <div class="rk-2">
            
            <a href="http://stickythang.com/index.php?id=1" target="_blank" title="StickyThang!">
              <img src="http://stickythang.com/lib/i/misc/stickythang.png" alt="StickyThang!" id="logo" />
            </a>
           
            <div id="top">
              <div class="padding">
                <table class="contentpaneopen">
                  <tr>
                    <td valign="top" colspan="2">
                      <div id="mission">
						<h4>The social web</h4>
						Comment on the web and share your thoughts with your work colleagues and friends. 
						</div>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="horiz-menu">
        <div id="navigation" class="menu">
              <div id="primary" class="clear-block">

              </div>
        </div> <!-- /navigation -->      
      </div>
      <div id="mainbody">
        <table class="mainbody" cellspacing="0" cellpadding="0">
          <tr valign="top">
            <td class="mainbody">
                
                  <div id="header-region"></div>



                  <div style="padding:30px;min-height:240px;" class="content">
                  <h1>StickyThang! options</h1>
                  
					<p class="intro">
						Use the form below to set StickyThang! options and 
						to leave product feedback, sugestions for
						new features, bugs etc...
					</p>
					
					<ul class="menu" dir="rtl">
						<li class=""><a class="Advanced"><span>Advanced settings</span></a></li>
						<li class=""><a class="Options"><span>Options</span></a></li>
						<li class=""><a class="Feedback"><span>Feedback</span></a></li>
						<li class="active"><a class="Signup"><span>Sign up</span></a></li>
					</ul>
					<form id="formSettings">
					<div id="Options" class="unit off">
					
						<fieldset>
							<legend>Settings, friends and circles</legend>
							

							
							<label>Note themes (not implented)</label>
							<p><select>
								<option>Pastel (default)</option>
								<option disabled="true">Aqua</option>
								<option disabled="true">Jungle</option>
								<option disabled="true">Monochrome</option>
								<option disabled="true">Viberant</option>
							</select></p>

							<label>Add/remove buddy <span>(people I'm following)</span></label>
							<p>
								<input type="text" id="inputAddBuddy" /> <input type="button" value="update list" id="buttonUpdateBuddies" />
							</p>
							<p>People I'm following...</p>
							<ul id="ulBuddiesList">
								
							</ul>
							<div class="circles">				
							<label>Manage my circles (not implented)</label>
							<table class="data">
								<tr>
									<th>Buddies</th>
									<th>Circle members</th>
									<th>Circles</th>
								</tr>
								<tr>
									<th><select multiple="multiple" disabled="true">
										<option>Name of buddy</option>
										
									</select></th>
									<td>
										<div class="circle-edit">Drag buddies here</div>
									</td>
									<th><select multiple="multiple" disabled="true">
										<option>Circle name</option>
										
									</select></th>
								</tr>
								<tr>
									<th></th>
									<td class="tac">
										<input type="button" value="create new circle" />
									</td>
									<th></th>
								</tr>
							</table>
							</div>
							<p>
								<input type="button" value="update settings" />
							</p>							
						</fieldset>
					</div>
					<div id="Feedback" class="unit off">
						<fieldset>
							<legend>Feedback</legend>
							<div id="divFeedbackThanks"><p>Thank you for your feedback</p></div>
							<div id="divFeedback">
								<input type="hidden" name="name" id="name" />
								<input type="hidden" name="email" value="feedback@stickythang.com" />							
								
								<label for="text">General feedback, bugs (please include steps to reproduce), feature requests etc...</label>
								<textarea id="textareaFeedback" name="text"></textarea>
								<label for="type" for="type">Type:</label>
								<p>
									
									<select id="type">
										<option>General</option>
										<option>Bug</option>
										<option>Suggestion / feature request</option>
									</select>
								</p>	
								
							</div>
							<p>
								<input type="button" value="sumbit feedback" id="buttonFeedback" />
							</p>
						</fieldset>
						
					</div>	
					<div id="Advanced" class="unit off">
						<fieldset>
							<legend>Advanced settings <span>(not implented)</span></legend>
							<label>Enable submit to Bugzilla <input type="checkbox" disabled="true" /></label>
							<label>Enable submit to JIRA <input type="checkbox" disabled="true" /></label>							
							<label>Custom CSS</label>
							<textarea disabled="true"></textarea>
							<p>
								<input type="button" value="update" />
							</p>
						</fieldset>
						
					</div>	
					<div id="Signup" class="unit">
						<iframe id="" src="http://stickythang.com/phpBB3/ucp.php" frameborder="0" style="width:100%;height:420px;margin:0;padding:0;">
							
							
						</iframe>
					</div>		
						
					</form>









                  </div>


            </td>
            <td class="right">
              <div class="padding">
                <div class="moduletable">
    
                    <div class="sidebar">
                    	
						
						
						
                    </div> <!-- /sidebar-right -->
                  
                </div>
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div id="bottom">
                <table class="usermodules bt" cellspacing="15">
          <tr valign="top">
 
            <td class="usermodules">
              <div class="moduletable">
                  <div id="bottom_right" class="column sidebar">





                  </div> <!-- /bottom_right -->
                
              </div>
            </td>
            <td>
               <div class="moduletable">
                  <div id="bottom_right" class="column sidebar">




                  </div> <!-- /bottom_right -->
                
              </div>
            </td>
           <td class="usermodules">
              <div class="moduletable">
                  <div id="bottom_left" class="column sidebar">






 








                  </div>
 <!-- /bottom_left -->
                
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div id="footer">
        <div class="rk-1">
          <div class="rk-2">
            <div id="the-footer" style="border-top:1px dashed #fff;opacity:0.5;padding-top:12px;">
Design by <a href="http://www.rockettheme.com/">RocketTheme</a>
            </div>
          </div>
        </div>
      </div>
    </div><!-- 1189991641 -->
	
	
	<script type="text/javascript">
		
		var background = chrome.extension.getBackgroundPage().window;
		background.stickythang.checkLoggedInUser();

	    if (!background.stickythang.db.localdb){
			background.stickythang.db.init();
		}		
		if (!background.stickythang.db.listBuddies.length){
			background.stickythang.db.getBuddies();
		}
		// background.stickythang.db.updateShare();
		var stickythang = {
			setUserDetails:function(ops){
				alert(ops.user +"-"+ops.pass);
			}
			
		}
		
		
		YUI().use('node','yql','json-parse','node-load',"io-form","transition",function(Y){

			Y.all("ul.menu a").on("click",function(e){
				e.preventDefault();
				var target = e.currentTarget;
				
				Y.all("ul.menu li").removeClass("active");
				target.ancestor("li").addClass("active")
				
				Y.all("div.unit").addClass("off")
				Y.one("#"+ target.get("className") ).removeClass("off");
				
				if (target.get("className") == "Options"){
					BuildBuddyList();
				}
				
			});		
			
			function onFailure(transactionid, response, arguments) {
			   console.log('not good'+ response.responseText)
			}
			// Subscribe to "io.failure".
			Y.on('io:failure', onFailure, Y, 'Transaction Failed');
			
			function onSuccess(transactionid, response, arguments) {
			   console.log('good:'+ response.responseText.match("You have been successfully logged in") +"\n\n"+ response.responseText)
			}	
			Y.on('io:success', onSuccess, Y, true);		
				
			function sendFeedback(){

				Y.one("#divFeedback").transition({
				    duration: 0.75, // seconds
				    opacity: '0'
				},function() {
				   Y.one("#divFeedbackThanks").setStyles({'position':'absolute','display':'block','opacity':'0'}).transition({
				   		duration:0.3,
						opacity:1
				   })
				})
				
				var uri = "http://stickythang.com/index.php?id=3";
			    var cfg = {
			        method: 'POST',
					sync: false,
			        form: {
						id : Y.one("#formSettings")
			        }
			    };
				Y.io(uri, cfg);
			}
			Y.one('#buttonFeedback').on('click',sendFeedback);
			
			
			
			
			var updateShare = function(){
				var dataverson = localStorage.dataversion;
				var uri = "",
					cfg = {
				        sync: true
				    };
				//var request = Y.io(uri, cfg);
				var obj = {
					"1":{
						"label":"all1"
						,"url":"http://something.php?id=1"
					},
					"2":{
						"label":"all2"
						,"url":"http://something.php?id=2"
					},
					"3":{
						"label":"all3",
						"url":"http://something.php?id=3"
					},
					"4":{
						"label":"all4"
						,"url":"http://something.php?id=4"
					}
				};
				
				var temp = '{"1":{"id":"1","label":"all1","url":"http://something.php?id=1"},"2":{"id":"2","label":"all2","url":"http://something.php?id=2"},"3":{"id":"3","label":"all3","url":"http://something.php?id=3"},"4":{"id":"4","label":"all4","url":"http://something.php?id=4"}}';
				
				var shareRS = Y.JSON.parse(temp);
				var rs = "",
					temp1;
					
				rs = shareRS[name];
				trans.executeSql("delete * from "+ stickythang.db.tableName +"_share");
	            trans.executeSql("INSERT INTO "+ stickythang.db.tableName +"_share (id, label, url) VALUES (?, ?, ?)", 
					[rs.id, rs.label, rs.url]);
				
				for (name in shareRS){
					temp1 = shareRS[name]
					rs+= name+":"+ temp1.label +"-" + temp1.url
				}
				alert(rs);
			}
			
			
			/* buddies bit */
			function BuildBuddyList(ops){
				// background.stickythang.db.getBuddies();
				if (ops && ops.message){
					console.log('build buddy list:'+ ops.message)
				}
				var buddies = background.stickythang.db.listBuddies;
				console.log('trying to build buddy list:'+ buddies.length)
				Y.one("#ulBuddiesList").empty();
				for (var i = 0;i<buddies.length;i++){
					Y.one("#ulBuddiesList").append("<li>"+ buddies[i] +"</li>")
				}	
			}
			function UpdateBuddyList(){
					var buddy = Y.one("#inputAddBuddy").get('value');
					// console.log('buddy:'+ buddy)
					if (!buddy){return}
					if (background.stickythang.isBuddy( buddy )){
						console.log('is buddy:'+ buddy)
						background.stickythang.db.removeBuddy( buddy , BuildBuddyList )
					}else{
						console.log('is NOT buddy:'+ buddy)
						background.stickythang.db.saveNewBuddy( buddy , BuildBuddyList )
					}
					
				
			}
			Y.one("#buttonUpdateBuddies").on('click',UpdateBuddyList);	
			
			
			
			Y.one("#formSettings").on("submit",function(e){
				e.preventDefault();
				UpdateBuddyList();
			})
		})			
	</script>
  </body>

</html>
